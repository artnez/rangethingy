const version="20201221",defaultSetup={element:{height:"0"},handle:{background:{color:"#007cf8",color2:"green",gradient:!1,hover:{color:"#0061c3"},active:{color:"#2f98f9"}},width:"2em",height:"2em",borderRadius:"1em",border:{width:"0",color:"lightgray",hover:{},active:{}},shadow:{color:"black",x:"0",y:"0",blur:"2px",spread:"0"}},track:{background:{color:"#efefef",color2:"green",gradient:!1,hover:{color:"#e5e5e5"},active:{color:"#f5f5f5"}},height:"1em",borderRadius:"0.5em",border:{width:"1px",color:"#b2b2b2",hover:{color:"#9a9a9a"},active:{color:"#c1c1c1"}},shadow:{color:"black",x:"0",y:"0",blur:"0",spread:"0"}},progress:{background:{color:"#007cf8",color2:"green",gradient:!1,hover:{color:"#0061c3"},active:{color:"#2f98f9"}}}};function createColorPicker(e,t,r="enabled"){return new Pickr({el:e,container:"#controlsContainer",theme:"monolith",appClass:"colorPicker",disabled:"disabled"==r,outputPrecision:0,comparison:!1,default:t,defaultRepresentation:"HEX",position:"bottom-start",adjustableNumbers:!0,components:{palette:!0,preview:!1,opacity:!0,hue:!0,interaction:{hex:!0,rgba:!0,hsla:!1,hsva:!1,cmyk:!1,input:!0,cancel:!1,clear:!1,save:!1}}})}function toRGBa(e){return e.getColor().toHEXA().toString()}function generateBackground(e,t,r){return r?`linear-gradient(to right, ${e}, ${t})`:e}class Length{constructor(e,t="px"){this.length=e,this.unit=t}get value(){return Length.makeValue(this.length,this.unit)}static makeValue(e,t){return 0==e?"0":e+t}static parse(e){if("0"==e)return new Length(0);const t=/^(.*)(px|em)$/i.exec(e);if(null!==t){const e=Number.parseFloat(t[1]);if(NaN!=e)return new Length(e,t[2])}throw new Error(`Failed to parse CSS length '${e}'`)}}function generateBorder(e,t){return 0==e.length?"none":e.value+" solid "+t}function generateShadow(e,t,r,n,o){if(0==t.length&&0==r.length&&0==n.length&&0==o.length)return"none";let a=t.value+" "+r.value;return 0!=o.length?a+=" "+n.value+" "+o.value:0!=n.length&&(a+=" "+n.value),a+" "+e}function evluateWithHook(e,t){return null===t?e():t(e)}function getEvaluatorWithHook(e,t){return null===t?e:()=>t(e)}function addEventListeners(e,t,r){if(Array.isArray(t))for(let n of t)e.addEventListener(n,r);else e.addEventListener(t,r)}function setupValidation(e,t,r,n=!0,o=null){const a=document.querySelector(e+" .validationDisplay");function d(e=!0){e?a.classList.remove("invalid"):a.classList.add("invalid")}d(n);const u=()=>CSS.supports(t,r.value),l=null===o?u:()=>o(r.value,u);return addEventListeners(r,["input","change"],function(){d(l())}),d}function dispatchValueChangedEvent(e){e.dispatchEvent(new CustomEvent("valueChanged"))}function isFunction(e){return e&&"[object Function]"===Object.prototype.toString.call(e)}class RawInput{constructor(e,t){if(null!==t&&!isFunction(t))throw TypeError("updateFunction is not a function");this.input=e,this.updateFunction=t}}function setupBackgroundSection(e,t,r=null){function n(e){const r=t[e];return void 0!==r?r:(console.error("Failed to get value '"+e+"' for background"),"#00ff00")}const o=createColorPicker(e+" #backgroundColor",n("color")),a=createColorPicker(e+" #backgroundColor2",n("color2")),d=document.querySelector(e),u=d.querySelector("#gradientCheckbox"),l=d.querySelector("#rawBackground");try{t.gradient||a.disable(),u.checked=t.gradient,l.value=evluateWithHook(()=>generateBackground(t.color,t.color2,t.gradient),r)}catch(e){console.error("Failed to parse values: "+e)}const i=setupValidation(e,"background",l),c=getEvaluatorWithHook(()=>generateBackground(toRGBa(o),toRGBa(a),u.checked),r);function s(){const e=c();l.value!=e&&(l.value=e,dispatchValueChangedEvent(l),i())}o.on("change",s),a.on("change",s);return addEventListeners(u,["change","input"],()=>{s(),u.checked?a.enable():a.disable()}),new RawInput(l,s)}function getVisibilityCheckbox(e){const t=e+' input[type="checkbox"].controlVisibility',r=document.querySelector(t);if(null===r)throw new Error("Can't find "+t);return r}function setupOverriddenBackgroundSection(e,t,r){const n=getVisibilityCheckbox(e);let o;void 0===t||void 0===t.color?(n.checked=!1,o=r):(n.checked=!0,o={color:t.color},void 0===t.color2?(o.color2=r.color2,o.gradient=!1):(o.color2=t.color2,o.graadient=void 0!==t.gradient&&t.gradient));const a=setupBackgroundSection(e,o,e=>n.checked?e():"");return n.addEventListener("change",a.updateFunction),a}function setInputStep(e,t,r=!1){switch(t){case"px":r&&(e.value*=16),e.step=1;break;case"em":r&&(e.value/=16),e.step=.1}}function setupLengthUnitChange(e,t){t.addEventListener("change",()=>{setInputStep(e,t.value,!0)})}function setupBorderSection(e,t,r=null){const n=document.querySelector(e),o=n.querySelector("#borderWidth"),a=n.querySelector("#borderWidthUnit"),d=createColorPicker(e+" #borderColor",function(e){const r=t[e];return void 0!==r?r:(console.error("Failed to get value '"+e+"' for border"),"#ff0000")}("color")),u=n.querySelector("#rawBorder");setupLengthUnitChange(o,a);try{const e=Length.parse(t.width);o.value=e.length,a.value=e.unit,setInputStep(o,e.unit),u.value=evluateWithHook(()=>generateBorder(e,t.color),r)}catch(e){console.error("Failed to parse values: "+e)}const l=setupValidation(e,"border",u),i=getEvaluatorWithHook(()=>generateBorder(new Length(o.value,a.value),toRGBa(d)),r);function c(){const e=i();u.value!=e&&(u.value=e,dispatchValueChangedEvent(u),l())}for(let e of[o,a])addEventListeners(e,["change","input"],c);return d.on("change",c),new RawInput(u,c)}function setupOverriddenBorderColorSection(e,t,r){const n=void 0!==t&&void 0!==t.color,o=n?t.color:function(e){const t=r[e];return void 0!==t?t:(console.error("Failed to get value '"+e+"' for border"),"#ff0000")}("color"),a=getVisibilityCheckbox(e);a.checked=n;const d=createColorPicker(e+" #borderColor",o),u=document.querySelector(e+" #rawBorderColor");u.value=n?o:"";const l=setupValidation(e,"border-color",u);function i(){const e=a.checked?toRGBa(d):"";u.value!=e&&(u.value=e,dispatchValueChangedEvent(u),l())}return d.on("change",i),a.addEventListener("change",i),new RawInput(u,i)}function setupLengthFieldSection(e,t,r,n,o=null){const a=document.querySelector(e),d=a.querySelector(n.amount),u=a.querySelector(n.unit),l=a.querySelector(n.raw);setupLengthUnitChange(d,u);const i=null===o?null:o.value;try{const e=Length.parse(r);d.value=e.length,u.value=e.unit,setInputStep(d,e.unit),l.value=evluateWithHook(()=>e.value,i)}catch(e){console.error("Failed to parse value: "+e)}const c=setupValidation(e,t,l,!0,null===o?null:o.validation),s=getEvaluatorWithHook(()=>Length.makeValue(d.value,u.value),i);function p(){const e=s();l.value!=e&&(l.value=e,dispatchValueChangedEvent(l),c())}for(let e of[d,u])addEventListeners(e,["change","input"],p);return new RawInput(l,p)}function setupWidthSection(e,t){return setupLengthFieldSection(e,"width",t,{amount:"#width",unit:"#widthUnit",raw:"#rawWidth"})}function setupHeightSection(e,t,r){return setupLengthFieldSection(e,"height",t,{amount:"#height",unit:"#heightUnit",raw:"#rawHeight"},r)}function setupBorderRadiusSection(e,t){return setupLengthFieldSection(e,"border-radius",t,{amount:"#borderRadius",unit:"#borderRadiusUnit",raw:"#rawBorderRadius"})}function setupShadowSection(e,t){const r=createColorPicker(e+" #shadowColor",function(e){const r=t[e];return void 0!==r?r:(console.error("Failed to get value '"+e+"' for shadow"),"#0000ff")}("color")),n=document.querySelector(e),o=n.querySelector("#shadowX"),a=n.querySelector("#shadowXUnit"),d=n.querySelector("#shadowY"),u=n.querySelector("#shadowYUnit"),l=n.querySelector("#shadowBlur"),i=n.querySelector("#shadowBlurUnit"),c=n.querySelector("#shadowSpread"),s=n.querySelector("#shadowSpreadUnit"),p=n.querySelector("#rawShadow");setupLengthUnitChange(o,a),setupLengthUnitChange(d,u),setupLengthUnitChange(l,i),setupLengthUnitChange(c,s);try{const e=Length.parse(t.x),r=Length.parse(t.y),n=Length.parse(t.blur),h=Length.parse(t.spread);o.value=e.length,a.value=e.unit,setInputStep(o,e.unit),d.value=r.length,u.value=r.unit,setInputStep(d,r.unit),l.value=n.length,i.value=n.unit,setInputStep(l,n.unit),c.value=h.length,s.value=h.unit,setInputStep(c,h.unit),p.value=generateShadow(t.color,e,r,n,h)}catch(e){console.error("Failed to parse values: "+e)}const h=setupValidation(e,"box-shadow",p);function g(){const e=generateShadow(toRGBa(r),new Length(o.value,a.value),new Length(d.value,u.value),new Length(l.value,i.value),new Length(c.value,s.value));p.value!=e&&(p.value=e,dispatchValueChangedEvent(p),h())}r.on("change",g);for(let e of[o,a,d,u,l,i,c,s])addEventListeners(e,["change","input"],g);return new RawInput(p,g)}const rawInputs=[];function addToInputsAndGet(e){return rawInputs.push(e),e.input}const inputs={element:{height:(()=>addToInputsAndGet(setupHeightSection("#element #height",defaultSetup.element.height,{value:e=>{const t=e();return"0"==t?"":t},validation:(e,t)=>"0"==e||t()})))()},handle:{background:addToInputsAndGet(setupBackgroundSection("#handle #background #normal",defaultSetup.handle.background)),width:addToInputsAndGet(setupWidthSection("#handle #width",defaultSetup.handle.width)),height:addToInputsAndGet(setupHeightSection("#handle #height",defaultSetup.handle.height)),borderRadius:addToInputsAndGet(setupBorderRadiusSection("#handle #borderRadius",defaultSetup.handle.borderRadius)),border:addToInputsAndGet(setupBorderSection("#handle #border #normal",defaultSetup.handle.border)),shadow:addToInputsAndGet(setupShadowSection("#handle #shadow",defaultSetup.handle.shadow)),hover:{background:addToInputsAndGet(setupOverriddenBackgroundSection("#handle #background #hover",defaultSetup.handle.background.hover,defaultSetup.handle.background)),borderColor:addToInputsAndGet(setupOverriddenBorderColorSection("#handle #border #hover",defaultSetup.handle.border.hover,defaultSetup.handle.border))},active:{background:addToInputsAndGet(setupOverriddenBackgroundSection("#handle #background #active",defaultSetup.handle.background.active,defaultSetup.handle.background)),borderColor:addToInputsAndGet(setupOverriddenBorderColorSection("#handle #border #active",defaultSetup.handle.border.active,defaultSetup.handle.border))}},track:{background:addToInputsAndGet(setupBackgroundSection("#track #background #normal",defaultSetup.track.background)),height:addToInputsAndGet(setupHeightSection("#track #height",defaultSetup.track.height)),borderRadius:addToInputsAndGet(setupBorderRadiusSection("#track #borderRadius",defaultSetup.track.borderRadius)),border:addToInputsAndGet(setupBorderSection("#track #border #normal",defaultSetup.track.border)),shadow:addToInputsAndGet(setupShadowSection("#track #shadow",defaultSetup.track.shadow)),hover:{background:addToInputsAndGet(setupOverriddenBackgroundSection("#track #background #hover",defaultSetup.track.background.hover,defaultSetup.track.background)),borderColor:addToInputsAndGet(setupOverriddenBorderColorSection("#track #border #hover",defaultSetup.track.border.hover,defaultSetup.track.border))},active:{background:addToInputsAndGet(setupOverriddenBackgroundSection("#track #background #active",defaultSetup.track.background.active,defaultSetup.track.background)),borderColor:addToInputsAndGet(setupOverriddenBorderColorSection("#track #border #active",defaultSetup.track.border.active,defaultSetup.track.border))}},progress:{background:addToInputsAndGet(setupBackgroundSection("#progress #background #normal",defaultSetup.progress.background)),hover:{background:addToInputsAndGet(setupOverriddenBackgroundSection("#progress #background #hover",defaultSetup.progress.background.hover,defaultSetup.progress.background))},active:{background:addToInputsAndGet(setupOverriddenBackgroundSection("#progress #background #active",defaultSetup.progress.background.active,defaultSetup.progress.background))}}},output=document.getElementById("styleDisplay"),styleElement=document.getElementById("styleElement"),decomposeStyle=function(){const e=document.createElement("SPAN").style;return function(t,r){if(e.cssText=t,!Array.isArray(r))return e.getPropertyValue(r);const n={};for(let t of r)n[t]=e.getPropertyValue(t);return n}}();function generateStyles(){const e=inputs.handle.width.value,t=inputs.handle.height.value,r=inputs.track.height.value,n="none"==inputs.handle.border.value?null:decomposeStyle(`border: ${inputs.handle.border.value};`,["border-top-width","border-bottom-width","border-left-width","border-right-width"]),o="none"==inputs.track.border.value?null:decomposeStyle(`border: ${inputs.track.border.value};`,["border-top-width","border-bottom-width"]);let a=!1,d="";"0"!=r&&(d=null!=o?`max((${r} - ${o["border-top-width"]} - ${o["border-bottom-width"]}) * 0.5,0px)`:`${r} * 0.5`,a=!0);let u="";if("0"!=t&&(u=`${t} * 0.5`,a=!0),null!=n){const e=n["border-top-width"];u=0==u.length?e:`max(${u},${e})`}0!=u.length&&(0==d.length?d="-1 * "+u:d+=" - "+u),0==d.length?d="0":a&&(d="calc("+d+")");let l=`/*generated with Input range slider CSS style generator (version ${version})\nhttps://toughengineer.github.io/demo/slider-styler*/\ninput[type=range].styled-slider {\n`;function i(e,...t){let r="";for(let e of t)0!=e[1].length&&(r+=`  ${e[0]}: ${e[1]};\n`);0!=r.length&&(l+=e+" {\n"+r+"}\n\n")}function c(e){return CSS.supports("background-color",e)?`linear-gradient(${e},${e})`:e}0!=inputs.element.height.value.length&&(l+=`  height: ${inputs.element.height.value};\n`),l+=`  -webkit-appearance: none;\n}\n\n/*progress support*/\ninput[type=range].styled-slider.slider-progress {\n  --range: calc(var(--max) - var(--min));\n  --ratio: calc((var(--value) - var(--min)) / var(--range));\n  --sx: calc(0.5 * ${e} + var(--ratio) * (100% - ${e}));\n}\n\ninput[type=range].styled-slider:focus {\n  outline: none;\n}\n\n/*webkit*/\ninput[type=range].styled-slider::-webkit-slider-thumb {\n  width: ${e};\n  height: ${t};\n  border-radius: ${inputs.handle.borderRadius.value};\n  background: ${inputs.handle.background.value};\n  border: ${inputs.handle.border.value};\n  box-shadow: ${inputs.handle.shadow.value};\n  margin-top: ${d};\n  -webkit-appearance: none;\n}\n\ninput[type=range].styled-slider::-webkit-slider-runnable-track {\n  height: ${r};\n  border-radius: ${inputs.track.borderRadius.value};\n  background: ${inputs.track.background.value};\n  border: ${inputs.track.border.value};\n  box-shadow: ${inputs.track.shadow.value};\n}\n`,i("input[type=range].styled-slider::-webkit-slider-thumb:hover",["background",inputs.handle.hover.background.value],["border-color",inputs.handle.hover.borderColor.value]),i("input[type=range].styled-slider:hover::-webkit-slider-runnable-track",["background",inputs.track.hover.background.value],["border-color",inputs.track.hover.borderColor.value]),i("input[type=range].styled-slider::-webkit-slider-thumb:active",["background",inputs.handle.active.background.value],["border-color",inputs.handle.active.borderColor.value]),i("input[type=range].styled-slider:active::-webkit-slider-runnable-track",["background",inputs.track.active.background.value],["border-color",inputs.track.active.borderColor.value]);const s=c(inputs.progress.background.value);function p(e,t){return 0==e.length?t:e}l+=`input[type=range].styled-slider.slider-progress::-webkit-slider-runnable-track {\n  background: ${s} 0/var(--sx) 100% no-repeat, ${inputs.track.background.value};\n}\n\n`;const h=p(inputs.track.hover.background.value,inputs.track.background.value);let g=inputs.progress.hover.background.value;0!=g.length&&(g=c(g),l+=`input[type=range].styled-slider.slider-progress:hover::-webkit-slider-runnable-track {\n  background: ${g} 0/var(--sx) 100% no-repeat, ${h};\n}\n\n`);const b=p(inputs.track.active.background.value,h);let v=inputs.progress.active.background.value;function k(e,t,...r){return"0"==e||null===t?e:`max(calc(${e} - ${t[r[0]]} - ${t[r[1]]}),0px)`}0!=v.length&&(v=c(v),l+=`input[type=range].styled-slider.slider-progress:active::-webkit-slider-runnable-track {\n  background: ${v} 0/var(--sx) 100% no-repeat, ${b};\n}\n\n`);const f=k(e,n,"border-left-width","border-right-width"),y=k(t,n,"border-top-width","border-bottom-width"),S=k(r,o,"border-top-width","border-bottom-width");l+=`/*mozilla*/\ninput[type=range].styled-slider::-moz-range-thumb {\n  width: ${f};\n  height: ${y};\n  border-radius: ${inputs.handle.borderRadius.value};\n  background: ${inputs.handle.background.value};\n  border: ${inputs.handle.border.value};\n  box-shadow: ${inputs.handle.shadow.value};\n}\n\ninput[type=range].styled-slider::-moz-range-track {\n  height: ${S};\n  border-radius: ${inputs.track.borderRadius.value};\n  background: ${inputs.track.background.value};\n  border: ${inputs.track.border.value};\n  box-shadow: ${inputs.track.shadow.value};\n}\n\n`,i("input[type=range].styled-slider::-moz-range-thumb:hover",["background",inputs.handle.hover.background.value],["border-color",inputs.handle.hover.borderColor.value]),i("input[type=range].styled-slider:hover::-moz-range-track",["background",inputs.track.hover.background.value],["border-color",inputs.track.hover.borderColor.value]),i("input[type=range].styled-slider::-moz-range-thumb:active",["background",inputs.handle.active.background.value],["border-color",inputs.handle.active.borderColor.value]),i("input[type=range].styled-slider:active::-moz-range-track",["background",inputs.track.active.background.value],["border-color",inputs.track.active.borderColor.value]),l+=`input[type=range].styled-slider.slider-progress::-moz-range-track {\n  background: ${s} 0/var(--sx) 100% no-repeat, ${inputs.track.background.value};\n}\n\n`,0!=g.length&&(l+=`input[type=range].styled-slider.slider-progress:hover::-moz-range-track {\n  background: ${g} 0/var(--sx) 100% no-repeat, ${h};\n}\n\n`),0!=v.length&&(l+=`input[type=range].styled-slider.slider-progress:active::-moz-range-track {\n  background: ${v} 0/var(--sx) 100% no-repeat, ${b};\n}\n\n`),l+=`/*ms*/\ninput[type=range].styled-slider::-ms-fill-upper {\n  background: transparent;\n  border-color: transparent;\n}\n\ninput[type=range].styled-slider::-ms-fill-lower {\n  background: transparent;\n  border-color: transparent;\n}\n\ninput[type=range].styled-slider::-ms-thumb {\n  width: ${e};\n  height: ${t};\n  border-radius: ${inputs.handle.borderRadius.value};\n  background: ${inputs.handle.background.value};\n  border: ${inputs.handle.border.value};\n  box-shadow: ${inputs.handle.shadow.value};\n  margin-top: 0;\n  box-sizing: border-box;\n}\n\ninput[type=range].styled-slider::-ms-track {\n  height: ${r};\n  border-radius: ${inputs.track.borderRadius.value};\n  background: ${inputs.track.background.value};\n  border: ${inputs.track.border.value};\n  box-shadow: ${inputs.track.shadow.value};\n  box-sizing: border-box;\n}\n\n`,i("input[type=range].styled-slider::-ms-thumb:hover",["background",inputs.handle.hover.background.value],["border-color",inputs.handle.hover.borderColor.value]),i("input[type=range].styled-slider:hover::-ms-track",["background",inputs.track.hover.background.value],["border-color",inputs.track.hover.borderColor.value]),i("input[type=range].styled-slider::-ms-thumb:active",["background",inputs.handle.active.background.value],["border-color",inputs.handle.active.borderColor.value]),i("input[type=range].styled-slider:active::-ms-track",["background",inputs.track.active.background.value],["border-color",inputs.track.active.borderColor.value]);const w="none"==inputs.track.border.value?"0":decomposeStyle(`border: ${inputs.track.border.value};`,["border-top-width","border-bottom-width","border-left-width"]),m=decomposeStyle(`border-radius: ${inputs.track.borderRadius.value};`,["border-top-left-radius","border-bottom-left-radius"]);l+=`input[type=range].styled-slider.slider-progress::-ms-fill-lower {\n  height: ${S};\n  border-radius: ${m["border-top-left-radius"]} 0 0 ${m["border-bottom-left-radius"]};\n  margin: -${w["border-top-width"]} 0 -${w["border-bottom-width"]} -${w["border-left-width"]};\n  background: ${inputs.progress.background.value};\n  border: ${inputs.track.border.value};\n  border-right-width: 0;\n}\n\n`,i("input[type=range].styled-slider.slider-progress:hover::-ms-fill-lower",["background",inputs.progress.hover.background.value],["border-color",inputs.track.hover.borderColor.value]),i("input[type=range].styled-slider.slider-progress:active::-ms-fill-lower",["background",inputs.progress.active.background.value],["border-color",inputs.track.active.borderColor.value]),output.textContent=l,styleElement.innerHTML=l}generateStyles();const throttlePeriod=100;let nextUpdateTime=performance.now(),updateScheduled=!1;function generateStylesThrottled(){const e=performance.now(),t=nextUpdateTime-e;t<=0?(generateStyles(),nextUpdateTime=e+throttlePeriod):updateScheduled||(setTimeout(()=>{generateStyles(),updateScheduled=!1},t),updateScheduled=!0)}for(let e of rawInputs)addEventListeners(e.input,["change","input","valueChanged"],generateStylesThrottled);function setupCopyButton(e,t){const r=t=>{e.classList.add("not-copied"),e.offsetWidth,e.classList.remove("not-copied"),console.log("Failed to copy to clipboard: ",t)};e.addEventListener("click",n=>{try{navigator.clipboard.writeText(t.textContent).then(()=>{e.classList.add("copied"),e.offsetWidth,e.classList.remove("copied")},r)}catch(e){r(e.message)}})}setupCopyButton(document.getElementById("copyCssButton"),output),document.getElementById("downloadCssLink").onclick=(()=>{const e=document.createElement("a");e.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(styleElement.textContent)),e.setAttribute("download","range-input.css"),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e)}),setupCopyButton(document.getElementById("copyJSButton"),document.getElementById("scriptDisplay"));